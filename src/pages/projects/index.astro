---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getTranslatedProjects, ProjectsScreen } from '@/features/projects';
import { ui, type LanguageCode, defaultLanguage, languages } from '@/i18n/ui';

const lang = (Astro.currentLocale ?? defaultLanguage) as LanguageCode;
const t = ui[lang];
const projects = await getTranslatedProjects(lang, { prioritizeFeatured: false });

const projectsPageTranslations = t.projectsPage;
const metaTitle =
  projectsPageTranslations?.metaTitle ??
  projectsPageTranslations?.title ??
  'Mis Proyectos';
const metaDescription =
  projectsPageTranslations?.metaDescription ?? 'Lista de todos mis proyectos';
---

<BaseLayout pageTitle={metaTitle} pageDescription={metaDescription}>
  <ProjectsScreen projects={projects} t={t} lang={lang} />
</BaseLayout>
